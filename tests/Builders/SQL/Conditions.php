<?php
//**************************************************************************************
//**************************************************************************************
/**
 * Conditions Test Class
 *
 * @package		phpOpenFW
 * @author 		Christian J. Clark
 * @copyright	Copyright (c) Christian J. Clark
 * @license		https://mit-license.org
 **/
//**************************************************************************************
//**************************************************************************************

namespace phpOpenFW\Test\Builders\SQL;

//**************************************************************************************
/**
 * Conditions Class
 */
//**************************************************************************************
class Conditions
{
    //=========================================================================
    // Class Members
    //=========================================================================
    protected static $test_classes = [
        'MySQL',
        'PgSQL',
        'Oracle',
        'SQLSrv'
    ];

    //=========================================================================
    //=========================================================================
    // Test
    //=========================================================================
    //=========================================================================
    public static function Test($test_only=false)
    {
        //----------------------------------------------------------------
        // Test each (or one) conditions class
        //----------------------------------------------------------------
        foreach (static::$test_classes as $class) {

            //----------------------------------------------------------------
            // Restrict tests to one class?
            //----------------------------------------------------------------
            if ($test_only && $class != $test_only) {
                continue;
            }

            //----------------------------------------------------------------
            // Test Header
            //----------------------------------------------------------------
            print "\n-------------------------------------------------------";
            print "\n*** {$class} Conditions Tests";
            print "\n-------------------------------------------------------\n\n";

            //----------------------------------------------------------------
            // Class to Test
            //----------------------------------------------------------------
            $class = '\phpOpenFW\Builders\SQL\Conditions\\' . $class;
    
            //----------------------------------------------------------------
            // Equals
            //----------------------------------------------------------------
            $params = [];
            $cond = $class::Equals('test_field', 1, $params, 'i');
            print "-> Equals: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // And Equals
            //----------------------------------------------------------------
            $params = [];
            $cond = $class::AndEquals('test_field', 1, $params, 'i');
            print "-> And Equals: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Or Equals
            //----------------------------------------------------------------
            $params = [];
            $cond = $class::OrEquals('test_field', 1, $params, 'i');
            print "-> Or Equals: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Not Equals
            //----------------------------------------------------------------
            $cond = $class::NotEquals('test_field2', 'test_value2', $params, 's');
            print "-> Not Equals: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Less Than
            //----------------------------------------------------------------
            $cond = $class::LessThan('test_field3', 1000, $params, 'i');
            print "-> Less Than: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Less Than Or Equal
            //----------------------------------------------------------------
            $cond = $class::LessThanOrEqual('test_field4', 2000, $params, 'i');
            print "-> Less Than Or Equal: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Greater Than
            //----------------------------------------------------------------
            $cond = $class::GreaterThan('test_field5', 3000, $params, 'i');
            print "-> Greater Than: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Greater Than Or Equal
            //----------------------------------------------------------------
            $cond = $class::GreaterThanOrEqual('test_field6', 4000, $params, 'i');
            print "-> Greater Than Or Equal: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Like
            //----------------------------------------------------------------
            $cond = $class::Like('test_field7', 'HeLlO wOrLd%', $params, 's');
            print "-> Like: {$cond}\n";
            print_r($params);
            print "\n";
    
            //----------------------------------------------------------------
            // Not Like
            //----------------------------------------------------------------
            $cond = $class::NotLike('test_field8', '%hello world', $params, 's');
            print "-> Not Like: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Is Null
            //----------------------------------------------------------------
            $cond = $class::IsNull('test_field9');
            print "-> Is Null: {$cond}\n";
            //print_r($params);
            //print "\n";
    
            //----------------------------------------------------------------
            // Is Not Null
            //----------------------------------------------------------------
            $cond = $class::IsNotNull('test_field10');
            print "-> Is Not Null: {$cond}\n";
            //print_r($params);
            //print "\n";

            //----------------------------------------------------------------
            // In
            //----------------------------------------------------------------
            $cond = $class::In('test_field11', [1, 2, 3], $params, 'i');
            print "-> In: {$cond}\n";
            print_r($params);
            print "\n";
    
            //----------------------------------------------------------------
            // Not In
            //----------------------------------------------------------------
            $cond = $class::NotIn('test_field12', ['a', 'b', 'c'], $params, 's');
            print "-> Not In: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Between
            //----------------------------------------------------------------
            $cond = $class::Between('test_field13', [1, 2], $params, 'i');
            print "-> Between: {$cond}\n";
            print_r($params);
            print "\n";

            //----------------------------------------------------------------
            // Not Between
            //----------------------------------------------------------------
            $cond = $class::NotBetween('test_field14', [1, 2], $params, 'i');
            print "-> Not Between: {$cond}\n";
            print_r($params);
            print "\n";
        }
    }
    
}
